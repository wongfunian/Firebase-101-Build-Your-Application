<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" href="assets/logo.png" type="image/x-icon" />
        <title>Google Developer Student Club - TARUC</title>
        <link rel="stylesheet" href="styles/signup.css" />
        <link rel="stylesheet" href="styles/socialMedia.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
            integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
    </head>

    <body>
        <div class="signupContainer">
            <div class="logo">
                <img src="assets/logo2.png" alt="GDSC" />
            </div>
            <input id="email" type="email" placeholder="Email" /><br />
            <input id="password" type="password" placeholder="Password" /><br />
            <input id="confirmPassword" type="password" placeholder="Confirm Password" /><br />
            <div class="link">
                <a href="login.html">Sign In</a>
            </div>
            <button id="signup">Sign Up</button>
        </div>

        <div class="social-media">
            <div class="button"><i class="fas fa-link"></i></div>
            <div class="facebook">
                <a href="https://www.facebook.com/gdsctaruc/" target="_blank"><i class="fab fa-facebook-f"></i></a>
            </div>
            <div class="instagram">
                <a href="https://www.instagram.com/gdsc_taruc/" target="_blank"><i class="fab fa-instagram"></i></a>
            </div>
            <div class="linkedin">
                <a href="https://www.linkedin.com/company/dsc-taruc/" target="_blank"><i class="fab fa-linkedin-in"></i></a>
            </div>
            <div class="discord">
                <a href="https://discord.gg/ZHe42KS8ap" target="_blank"><i class="fab fa-discord"></i></a>
            </div>
            <div class="website">
                <a href="https://gdsctaruc.github.io/" target="_blank"><i class="fas fa-globe-africa"></i></a>
            </div>
        </div>

        <script src="src/lib/socialMedia.js"></script>
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.3/firebase-app.js';
            // TODO: Add SDKs for Firebase products that you want to use
            import { getAuth, createUserWithEmailAndPassword, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/9.6.3/firebase-auth.js';

            // Your web app's Firebase configuration
            const firebaseConfig = {
                apiKey: '',
                authDomain: '',
                projectId: '',
                storageBucket: '',
                messagingSenderId: '',
                appId: '',
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);

            // check is user log in
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    window.location.href = 'index.html';
                }
            });

            // sign up function
            document.getElementById('signup').addEventListener('click', () => {
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirmPassword').value;

                if (password !== confirmPassword) {
                    alert('Password does not match, please try again');
                    return false;
                }

                // Firebase Sign Up Method
                createUserWithEmailAndPassword(auth, email, password)
                    .then((userCredential) => {
                        // Signed in
                        alert('User created!');
                        window.location.href = 'login.html';
                    })
                    .catch((error) => {
                        const errorCode = error.code;
                        alert(errorCode);
                    });
            });
        </script>
    </body>
</html>
